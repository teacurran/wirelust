---
id: 104
title: 'Compiling opencv statically on OSX'
date: 2009-02-04 22:03:02
author: Tea
layout: revision
guid: 'http://www.wirelust.com/2009/02/04/102-revision-2/'
permalink: '/?p=104'
---

OpenCV is rapidly changing and there is no bundled version that comes with OSX. I'm working on some command line apps and don't feel like explaining to my users how to install Macports so I decided I would need to statically compile it into my application. Here is what needed to be done:

First off, [this document](http://opencv.willowgarage.com/wiki/Mac_OS_X_OpenCV_Port) on the OpenCv Wiki doesn't seem to work anymore if you are pulling directly from subversion.

**Build System** – Open CV seems to have 3 types of build scripts in subversion: Make, Autotools, and CMake. It took a lot of trial and error before I realized that only CMake appears to be working, at least on my system.

You can get a copy of CMake here [here](http://www.cmake.org/cmake/resources/software.html).

Before you run CMake, you have to change the following files:

- src/cxcore/CMakeLists.txt
- src/highgui/CMakeLists.txt
- src/cvaux/CMakeLists.txt
- src/cv/CMakeLists.txt
- src/ml/CMakeLists.txt
- tests/cxts/CMakeLists.txt

Look for the add\_library lines and change this:

```bash
add_library($<span style="color: #66cc66;">{the_target}</span> DYNAMIC $<span style="color: #66cc66;">{lib_srcs}</span> $<span style="color: #66cc66;">{lib_hdrs}</span>)
```

to this:

```bash
add_library($<span style="color: #66cc66;">{the_target}</span> STATIC $<span style="color: #66cc66;">{lib_srcs}</span> $<span style="color: #66cc66;">{lib_hdrs}</span>)
```

Once you have made that change, follow the CMake instructions [here](http://opencv.willowgarage.com/wiki/InstallGuide)

**In Your Own Project**  
Assuming the above worked well, you can now statically compile your application pointing to the .a files generated by your opencv build.

One thing to keep in mind, is that your application now has to be linked to OSX system frameworks. You can resolve this by adding the frameworks to your linker in your Makefile:

```bash
 
```